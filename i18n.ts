import { computed } from 'vue'
import { useAppStore } from './store/app'

/**
 * Basic internationalisation support for DS studio.
 *
 * Define your translation strings here. Keys should be consistent across languages.
 */
const translations: Record<string, Record<string, string>> = {
  zh: {
    brand: 'å“ç‰Œ',
    theme: 'ä¸»é¢˜',
    language: 'è¯­è¨€',
    reset: 'é‡ç½®æœ¬æœºæ”¹åŠ¨',
    dark: 'æš—è‰²',
    light: 'äº®è‰²',
    componentLab: 'ç»„ä»¶å®žéªŒ',
    componentLabSubtitle: 'ä¸šåŠ¡è®¾è®¡å¸ˆå¯åœ¨å³ä¾§æ”¹ tokenï¼Œé¢„è§ˆä¼šå®žæ—¶è”åŠ¨ï¼ˆéµå®ˆ L4â†’L3â†’L2â†’L1ï¼‰',
    currentComponent: 'å½“å‰ç»„ä»¶',
    buttonVariant: 'æŒ‰é’®é£Žæ ¼',
    state: 'çŠ¶æ€',
    preview: 'é¢„è§ˆ',
    tips: 'æç¤º',
    tipRaw: 'å³ä¾§æ”¹çš„æ˜¯ã€Œtoken çš„ raw å€¼ã€ï¼ˆä»…å…è®¸ {reference}ï¼‰',
    tipExport: 'å¯¼å‡ºé¡µä¼šè¾“å‡ºä¸‰ç«¯ JSONï¼ˆé¢œè‰²æ ¼å¼åŒ–ï¼‰',
    propertyPanel: 'å±žæ€§é¢æ¿ï¼ˆToken ç»‘å®šï¼‰',
    currentScope: 'å½“å‰ scope',
    labelFill: 'æŒ‰é’®å¡«å……è‰²ï¼ˆfillï¼‰',
    labelContent: 'æŒ‰é’®æ–‡å­—è‰²ï¼ˆcontentï¼‰',
    paddingH: 'Paddingï¼ˆæ°´å¹³ mï¼‰',
    paddingV: 'Paddingï¼ˆåž‚ç›´ mï¼‰',
    placeholderDemo: 'è¿™ä¸ªéª¨æž¶å·²ç»æŠŠ tokens å…¨é‡è§£æžä¸Žå¯¼å‡ºæ‰“é€š âœ…',
    placeholderExample: 'ä¾‹å¦‚ï¼šinput çš„ border / bg / textColor / radius',
    debug: 'å½“å‰ä½¿ç”¨ token',
    currentRaw: 'å½“å‰ raw',
    resolved: 'resolved',
    scope: 'scope',
    notTokenRef: 'å½“å‰ raw ä¸æ˜¯ token å¼•ç”¨ã€‚ä¸ºä¿è¯ç»„ä»¶åº“ç»Ÿä¸€ç®¡ç†ï¼Œè¯·ä»Žä¸‹æ‹‰æ¡†é€‰æ‹©ä¸€ä¸ª token å¹¶ç‚¹å‡»ã€Œåº”ç”¨ã€è¦†ç›–ã€‚',
    l1Warning: 'å½“å‰å¤„äºŽ L1 å±‚çº§ï¼šæœ¬å·¥å…·ä¸ä¼šè®©ä¸šåŠ¡ä¾§ç›´æŽ¥æ”¹ literalã€‚',
    tokenNotExist: 'è¯¥ token ä¸å­˜åœ¨æˆ–ä¸åœ¨å…è®¸å¼•ç”¨çš„å±‚çº§èŒƒå›´å†…',
    apply: 'åº”ç”¨',
    clearChange: 'æ¸…é™¤æ”¹åŠ¨',
    tokens: 'Tokens',
    tokensSubtitle: 'æ”¯æŒæœç´¢ã€æŸ¥çœ‹ raw/resolvedã€ç¼–è¾‘ï¼ˆæ”¹åŠ¨å­˜ localStorageï¼‰',
    level: 'å±‚çº§',
    l4Components: 'L4 Components',
    l3Modes: 'L3 Color modes',
    l2Brands: 'L2 Brands',
    l1Primitives: 'L1 Primitives',
    searchPlaceholder: 'æœç´¢ token pathï¼Œæ¯”å¦‚ brand.fill / button.color ...',
    token: 'token',
    rawColumn: 'raw',
    resolvedColumn: 'resolved',
    operations: 'æ“ä½œ',
    edit: 'ç¼–è¾‘',
    clear: 'æ¸…é™¤',
    editor: 'ç¼–è¾‘å™¨',
    currentColon: 'å½“å‰ï¼š',
    emptyEdit: 'ä»Žå·¦ä¾§é€‰æ‹©ä¸€ä¸ª token å¼€å§‹ç¼–è¾‘ ðŸ™‚',
    note: 'æ³¨æ„',
    noteL3: 'L3 çš„ token ä¼šéš Light/Dark åˆ‡æ¢è€Œå˜åŒ–',
    noteL2: 'L2 çš„ token ä¼šéš Brand åˆ‡æ¢è€Œå˜åŒ–',
    noteL4: 'L4 æŽ¨èåªå¼•ç”¨ L3ï¼ˆä¿æŒè§£è€¦ï¼‰',
    exportTokens: 'å¯¼å‡º Tokens',
    exportHint: 'ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ä»¥ JSON æ ¼å¼å¯¼å‡ºå½“å‰ tokensã€‚',
    exportButton: 'å¯¼å‡º JSON',
    placeholderSearch: 'æœç´¢å¹¶é€‰æ‹© tokenï¼ˆä»…å…è®¸å¼•ç”¨ï¼‰',
    noMatch: 'æ— åŒ¹é…ç»“æžœ',
    results: 'ä¸ªç»“æžœ',
    layerToken: 'å±‚çº§ token',
    desc: 'Token Â· ä¸»é¢˜åˆ‡æ¢ Â· ç»„ä»¶å±žæ€§è”åŠ¨ Â· å¤šç«¯å¯¼å‡º',
    /* Export page */
    exportSubtitle: 'è¾“å‡º resolved tokensï¼šWeb / iOS / Androidï¼ˆé¢œè‰²æ ¼å¼åŒ–ï¼‰',
    platform: 'å¹³å°',
    range: 'èŒƒå›´',
    filePrefix: 'æ–‡ä»¶åå‰ç¼€',
    scopeActive: 'ä»…å½“å‰ï¼ˆå“ç‰Œ + ä¸»é¢˜ï¼‰',
    scopeAll: 'å…¨é‡ï¼ˆæ‰€æœ‰å“ç‰Œ Ã— light/darkï¼‰',
    noteExport1: 'å¯¼å‡ºçš„æ˜¯ resolved å€¼ï¼šå¼•ç”¨å·²å±•å¼€ï¼Œéµå®ˆ L4â†’L3â†’L2â†’L1',
    noteExport2: 'ä½ åœ¨ UI ä¸­åšçš„æ”¹åŠ¨ï¼ˆlocalStorage overridesï¼‰ä¼šå‚ä¸Žå¯¼å‡º',
    noteExport3: 'Android é¢œè‰²ï¼š#AARRGGBBï¼›iOSï¼š#RRGGBBAAï¼›Webï¼š#RRGGBB æˆ– #RRGGBBAA',
    /* Token picker */
    l1NoRef: 'L1 Primitives ä¸æ”¯æŒåœ¨æ­¤é¡µé¢é€šè¿‡â€œå¼•ç”¨â€æ–¹å¼ä¿®æ”¹',
    l1Suggestion: 'å»ºè®®åœ¨æº token è¡¨ / tokens.json ä¸­ç»´æŠ¤ L1 å€¼ï¼ˆä¿æŒå•ä¸€ä¿¡æºï¼‰ã€‚',
    selectAToken: 'è¯·é€‰æ‹©ä¸€ä¸ª token',
    /* TokenRefSelect */
    selectHint: 'å›žè½¦é€‰æ‹© / ESC å…³é—­',
    resultsCountPrefix: 'å…±',
    resultsCountSuffix: 'ä¸ª token',
  },
  en: {
    brand: 'Brand',
    theme: 'Theme',
    language: 'Lang',
    reset: 'Reset Local Changes',
    dark: 'Dark',
    light: 'Light',
    componentLab: 'Component Lab',
    componentLabSubtitle: 'Designers can modify tokens on the right; preview reflects changes (L4â†’L3â†’L2â†’L1)',
    currentComponent: 'Component',
    buttonVariant: 'Button Variant',
    state: 'State',
    preview: 'Preview',
    tips: 'Tips',
    tipRaw: 'The right side edits the raw value (only {reference})',
    tipExport: 'Export page outputs Web/iOS/Android JSON (formatted colours)',
    propertyPanel: 'Property Panel (Token Binding)',
    currentScope: 'Current scope',
    labelFill: 'Button Fill',
    labelContent: 'Button Text Colour',
    paddingH: 'Padding (horizontal m)',
    paddingV: 'Padding (vertical m)',
    placeholderDemo: 'This scaffold already has full token resolution and export wired up âœ…',
    placeholderExample: 'e.g. input border / bg / textColor / radius',
    debug: 'Current tokens',
    currentRaw: 'Current raw',
    resolved: 'Resolved',
    scope: 'Scope',
    notTokenRef: 'Current raw is not a token reference. To maintain consistency, pick a token from the dropdown and click Apply.',
    l1Warning: 'Currently at L1 layer: this tool does not allow direct literal editing.',
    tokenNotExist: 'Token does not exist or is not allowed in this layer.',
    apply: 'Apply',
    clearChange: 'Clear',
    tokens: 'Tokens',
    tokensSubtitle: 'Search, inspect raw/resolved and edit (changes saved in localStorage)',
    level: 'Level',
    l4Components: 'L4 Components',
    l3Modes: 'L3 Color modes',
    l2Brands: 'L2 Brands',
    l1Primitives: 'L1 Primitives',
    searchPlaceholder: 'Search token path, e.g. brand.fill / button.color ...',
    token: 'token',
    rawColumn: 'raw',
    resolvedColumn: 'resolved',
    operations: 'Actions',
    edit: 'Edit',
    clear: 'Clear',
    editor: 'Editor',
    currentColon: 'Current:',
    emptyEdit: 'Select a token on the left to start editing ðŸ™‚',
    note: 'Note',
    noteL3: 'L3 tokens change with Light/Dark mode',
    noteL2: 'L2 tokens change with Brand',
    noteL4: 'L4 should only reference L3 (keep decoupled)',
    exportTokens: 'Export Tokens',
    exportHint: 'Click the button below to export tokens as JSON.',
    exportButton: 'Export JSON',
    placeholderSearch: 'Search & select token (reference only)',
    noMatch: 'No matches',
    results: 'results',
    layerToken: 'Layer token',
    desc: 'Tokens Â· Theme switch Â· Component binding Â· Multi-platform export',
    /* Export page */
    exportSubtitle: 'Export resolved tokens: Web / iOS / Android (formatted colours)',
    platform: 'Platform',
    range: 'Scope',
    filePrefix: 'File prefix',
    scopeActive: 'Active (current brand + mode)',
    scopeAll: 'All (all brands Ã— light/dark)',
    noteExport1: 'Exported values are resolved (references expanded following L4â†’L3â†’L2â†’L1)',
    noteExport2: 'Your UI overrides (localStorage) are included in the export',
    noteExport3: 'Android colours: #AARRGGBB; iOS: #RRGGBBAA; Web: #RRGGBB or #RRGGBBAA',
    /* Token picker */
    l1NoRef: 'L1 primitives cannot be modified by reference on this page',
    l1Suggestion: 'Maintain L1 values in the source token table / tokens.json (single source of truth).',
    selectAToken: 'Please select a token',
    /* TokenRefSelect */
    selectHint: 'Enter to select / ESC to close',
    resultsCountPrefix: 'Found',
    resultsCountSuffix: 'tokens',
  }
}

/**
 * Composable that returns a translation function based on current language in store.
 */
export function useT() {
  const store = useAppStore()
  return (key: string): string => {
    const lang = store.lang || 'zh'
    const dict = translations[lang] || translations.zh
    return dict[key] || dict[key.toLowerCase()] || key
  }
}